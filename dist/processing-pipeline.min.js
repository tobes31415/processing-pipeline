!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(t.s=8)}([function(e,t,r){function n(){"use strict";return new o.a}var o=r(6);t.create=n},function(e,t,r){function n(){"use strict";function e(){i={}}function t(e){if(!e)throw new Error("CacheContext cannot be null");if("object"!=typeof e&&"function"!=typeof e)throw new Error("CacheContext must be an object or function");var t=e[o];return t||(t=""+Math.floor(99999*Math.random()),e[o]=t),t}function r(){var e=Array.prototype.slice.call(arguments,0),r=e.reduce(function(e,r){return(""|e)+t(r)+"|"}),n=i[r];return n||(n={},i[r]=n),n}var n=this,i={};n.clear=e,n.get=r}t.a=n;const o=Symbol("cacheManagerContext")},function(e,t,r){function n(e,t){return e.reduce(function(e,r){var n=t.changed[r]||!1;return n||(n=i(r,t).detectChanges(r,t),n&&(t.changed[r]=!0)),e||n},null)}function o(e){for(var t in e.changed)i(t,e).updateHistory(t,e)}function i(e,t){var r=t.model[e+s]||l;if("object"==typeof r){if("function"==typeof r.detectChanges&&"function"==typeof r.updateHistory)return r;throw new Error("When specifiying a custom mode you must supply a detectChanges function, and an updateHistory function")}if("string"!=typeof r)throw new Error("Only String and Object are allowed values for ChangeMode");if(r=r.toLowerCase(),r===a)return c;if(r===f)return u;throw new Error("Change detection mode not recognized")}var c=r(4),u=r(3);t.detectChanges=n,t.updateHistory=o;const s="_ChangeMode",a="json",f="identity",l=a},function(e,t,r){function n(e,t){var r=t.model[e],n=t.history[e];if(void 0===n!=(void 0===r))return!0;if(void 0===r)return!1;if("object"==typeof r){var o={},i=[];for(var c in r)i.push(c);for(var u in n)i.push(u);for(var s=0;s<i.length;s++){var a=i[s];if(!o[a]&&(o[a]=!0,r[a]!==n[a]))return!0}return!1}return n!==r}function o(e,t){var r=t.model[e];if(void 0===r)delete t.history[e];else if("object"==typeof r){t.history[e]=t.history[e]||{};for(var n in r)t.history[e][n]=r[n]}else t.history[e]=t.model[e]}t.detectChanges=n,t.updateHistory=o},function(e,t,r){function n(e,t){return void 0===t.history[e]!=(void 0===t.model[e])||void 0!==t.model[e]&&JSON.stringify(t.model[e])!==t.history[e]}function o(e,t){"undefined"===t.model[e]?delete t.history[e]:t.history[e]=JSON.stringify(t.model[e])}t.detectChanges=n,t.updateHistory=o},function(e,t,r){function n(){var e=this||{};return e.promise=new Promise(function(t,r){e.resolve=t,e.reject=r}),e}t.a=n},function(e,t,r){(function(e){function n(){"use strict";function e(e,t){var r=c.a();return w.push({deferred:r,model:e,processor:t||s}),n(),r.promise}function t(){b=!0}function r(){b=!1,w=[],w.push({model:{},processor:g.clear}),n()}function n(){if(!b&&!T&&w.length>0){var e=w.shift(),t={model:e.model,history:C,changed:{}},r=function(){T=!1,i.updateHistory(t),e.deferred.resolve(),setTimeout(n,0)},o=f(t,e.processor);o["catch"](a),o.then(r,r)}}function a(e){v===u?(m.halt(),console.error(e)):console.warn(e)}function f(e,t){if(!t)throw new Error("Processor undefined");if(b)return Promise.resolve();var r;if("function"==typeof t?r=l:"string"==typeof t?r=h:Array.isArray(t)?r=p:"object"==typeof t&&(r=d),r)return r(e,t);throw new Error("Not sure how to run processor",t)}function l(e,t){return Promise.resolve(t({model:e.model,changed:e.changed,cache:g.get(m,t)}))}function h(e,t){return f(e,e.model.processors[t.toLowerCase()])}function d(e,t){if(!t.runs||"string"!=typeof t.runs&&"object"!=typeof t.runs&&"function"!=typeof t.runs)throw new Error("Object based processor must have a 'runs' property containing a processor defintion");var r=!0;return"string"==typeof t.watches&&(t.watches=[t.watches]),Array.isArray(t.watches)&&(r=i.detectChanges(t.watches,e)),r?f(e,t.runs):Promise.resolve()}function p(e,t){return new Promise(function(r,n){function o(){if(0===i.length)r();else{var t=f(e,i.shift());t["catch"](a),t.then(o,o)}}var i=t.slice();o()})}function y(e){if("halt"!==e&&"warn"!==e)throw new Error("On fail only accepts a single string value which must be exactly 'HALT' or 'WARN'");v=e}var m=this,v=u,w=[],g=new o.a,b=!1,T=!1,C={};m.process=e,m.halt=t,m.restart=r,m.onFail=y}var o=r(1),i=r(2),c=r(5);t.a=n;const u="HALT",s="start"}).call(t,r(7))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function c(){y&&d&&(y=!1,d.length?p=d.concat(p):m=-1,p.length&&u())}function u(){if(!y){var e=o(c);y=!0;for(var t=p.length;t;){for(d=p,p=[];++m<t;)d&&d[m].run();m=-1,t=p.length}d=null,y=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function a(){}var f,l,h=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var d,p=[],y=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new s(e,t)),1!==p.length||y||o(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,r){e.exports=r(0)}])});